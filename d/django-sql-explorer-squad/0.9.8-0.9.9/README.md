# Comparing `tmp/django_sql_explorer_squad-0.9.8-py3-none-any.whl.zip` & `tmp/django_sql_explorer_squad-0.9.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,55 +1,51 @@
-Zip file size: 66377 bytes, number of entries: 53
--rw-r--r--  2.0 unx      581 b- defN 23-Apr-03 11:51 explorer/__init__.py
--rw-r--r--  2.0 unx     1632 b- defN 23-Apr-03 11:51 explorer/actions.py
--rw-r--r--  2.0 unx      375 b- defN 23-Apr-20 07:23 explorer/admin.py
--rw-r--r--  2.0 unx     2180 b- defN 23-Apr-07 15:58 explorer/app_settings.py
--rw-r--r--  2.0 unx     2054 b- defN 23-Apr-03 11:51 explorer/counter.py
--rw-r--r--  2.0 unx     2039 b- defN 23-Apr-20 07:24 explorer/forms.py
--rw-r--r--  2.0 unx     9204 b- defN 23-Jul-06 11:55 explorer/models.py
--rw-r--r--  2.0 unx     2233 b- defN 23-Apr-03 11:51 explorer/tasks.py
--rw-r--r--  2.0 unx     1265 b- defN 23-Apr-03 11:51 explorer/urls.py
--rw-r--r--  2.0 unx     8155 b- defN 23-Apr-19 10:31 explorer/utils.py
--rw-r--r--  2.0 unx    15149 b- defN 23-Apr-20 07:10 explorer/views.py
--rw-r--r--  2.0 unx      622 b- defN 23-Apr-07 14:34 explorer/__pycache__/__init__.cpython-39.pyc
--rw-r--r--  2.0 unx    12809 b- defN 23-Apr-07 14:34 explorer/__pycache__/models.cpython-39.pyc
--rw-r--r--  2.0 unx     9715 b- defN 23-Apr-07 14:34 explorer/__pycache__/utils.cpython-39.pyc
--rw-r--r--  2.0 unx     1909 b- defN 23-Apr-03 11:51 explorer/migrations/0001_initial.py
--rw-r--r--  2.0 unx      511 b- defN 23-Apr-03 11:51 explorer/migrations/0002_auto_20150501_1515.py
--rw-r--r--  2.0 unx      457 b- defN 23-Apr-03 11:51 explorer/migrations/0003_query_snapshot.py
--rw-r--r--  2.0 unx      410 b- defN 23-Apr-03 11:51 explorer/migrations/0004_querylog_duration.py
--rw-r--r--  2.0 unx     1229 b- defN 23-Apr-03 11:51 explorer/migrations/0005_querychangelog.py
--rw-r--r--  2.0 unx      454 b- defN 23-Apr-03 11:51 explorer/migrations/0006_auto_20230207_0103.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-03 11:51 explorer/migrations/__init__.py
--rw-r--r--  2.0 unx     1390 b- defN 23-Apr-03 11:51 explorer/static/explorer/explorer.css
--rw-r--r--  2.0 unx     7596 b- defN 23-Apr-19 12:41 explorer/static/explorer/explorer.js
--rw-r--r--  2.0 unx     1560 b- defN 23-Apr-03 11:51 explorer/static/explorer/query-list.js
--rw-r--r--  2.0 unx     3883 b- defN 23-Apr-03 11:51 explorer/templates/explorer/base.html
--rw-r--r--  2.0 unx      510 b- defN 23-Apr-03 11:51 explorer/templates/explorer/params.html
--rw-r--r--  2.0 unx     3879 b- defN 23-Apr-12 11:36 explorer/templates/explorer/play.html
--rw-r--r--  2.0 unx     6855 b- defN 23-Apr-03 11:51 explorer/templates/explorer/preview_pane.html
--rw-r--r--  2.0 unx     6739 b- defN 23-Apr-19 12:40 explorer/templates/explorer/query.html
--rw-r--r--  2.0 unx      369 b- defN 23-Apr-03 11:51 explorer/templates/explorer/query_confirm_delete.html
--rw-r--r--  2.0 unx     4526 b- defN 23-Apr-12 11:38 explorer/templates/explorer/query_list.html
--rw-r--r--  2.0 unx     2018 b- defN 23-Apr-11 07:16 explorer/templates/explorer/querychangelog_list.html
--rw-r--r--  2.0 unx     1969 b- defN 23-Apr-11 07:15 explorer/templates/explorer/querylog_list.html
--rw-r--r--  2.0 unx     1819 b- defN 23-Apr-03 11:51 explorer/templates/explorer/schema.html
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-03 11:51 explorer/tests/__init__.py
--rw-r--r--  2.0 unx      435 b- defN 23-Apr-03 11:51 explorer/tests/factories.py
--rw-r--r--  2.0 unx     1439 b- defN 23-Apr-03 11:51 explorer/tests/settings.py
--rw-r--r--  2.0 unx     2049 b- defN 23-Apr-03 11:51 explorer/tests/test_actions.py
--rw-r--r--  2.0 unx     1110 b- defN 23-Apr-03 11:51 explorer/tests/test_forms.py
--rw-r--r--  2.0 unx     6307 b- defN 23-Apr-03 11:51 explorer/tests/test_models.py
--rw-r--r--  2.0 unx     1985 b- defN 23-Apr-03 11:51 explorer/tests/test_tasks.py
--rw-r--r--  2.0 unx     4827 b- defN 23-Apr-03 11:51 explorer/tests/test_utils.py
--rw-r--r--  2.0 unx    19387 b- defN 23-Apr-03 11:51 explorer/tests/test_views.py
--rw-r--r--  2.0 unx      222 b- defN 23-Apr-03 11:51 explorer/tests/urls.py
--rw-r--r--  2.0 unx      928 b- defN 23-Apr-03 11:51 explorer/tests/utils.py
--rw-r--r--  2.0 unx      163 b- defN 23-Apr-07 14:35 explorer/tests/__pycache__/__init__.cpython-39.pyc
--rw-r--r--  2.0 unx      414 b- defN 23-Apr-07 14:35 explorer/tests/__pycache__/urls.cpython-39.pyc
--rw-r--r--  2.0 unx      244 b- defN 23-Jul-06 12:19 django_sql_explorer_squad-0.9.8.dist-info/AUTHORS
--rw-r--r--  2.0 unx     1090 b- defN 23-Jul-06 12:19 django_sql_explorer_squad-0.9.8.dist-info/LICENSE
--rw-r--r--  2.0 unx    15986 b- defN 23-Jul-06 12:19 django_sql_explorer_squad-0.9.8.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jul-06 12:19 django_sql_explorer_squad-0.9.8.dist-info/WHEEL
--rw-r--r--  2.0 unx        9 b- defN 23-Jul-06 12:19 django_sql_explorer_squad-0.9.8.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     4789 b- defN 23-Jul-06 12:19 django_sql_explorer_squad-0.9.8.dist-info/RECORD
-53 files, 177572 bytes uncompressed, 58639 bytes compressed:  67.0%
+Zip file size: 56243 bytes, number of entries: 49
+-rw-r--r--  2.0 unx      581 b- defN 23-Jul-07 05:03 explorer/__init__.py
+-rw-r--r--  2.0 unx     1632 b- defN 23-Mar-15 11:27 explorer/actions.py
+-rw-r--r--  2.0 unx      375 b- defN 23-Jul-05 13:06 explorer/admin.py
+-rw-r--r--  2.0 unx     2290 b- defN 23-Jul-05 13:06 explorer/app_settings.py
+-rw-r--r--  2.0 unx     2054 b- defN 23-Mar-15 11:27 explorer/counter.py
+-rw-r--r--  2.0 unx     2039 b- defN 23-Jul-05 13:06 explorer/forms.py
+-rw-r--r--  2.0 unx     9685 b- defN 23-Jul-07 05:00 explorer/models.py
+-rw-r--r--  2.0 unx     2233 b- defN 23-Mar-15 11:27 explorer/tasks.py
+-rw-r--r--  2.0 unx     1265 b- defN 23-Mar-15 11:27 explorer/urls.py
+-rw-r--r--  2.0 unx    11746 b- defN 23-Jul-05 13:06 explorer/utils.py
+-rw-r--r--  2.0 unx    15149 b- defN 23-Jul-05 13:06 explorer/views.py
+-rw-r--r--  2.0 unx      616 b- defN 23-Jul-05 06:40 explorer/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--  2.0 unx     1909 b- defN 23-Mar-15 11:27 explorer/migrations/0001_initial.py
+-rw-r--r--  2.0 unx      511 b- defN 23-Mar-15 11:27 explorer/migrations/0002_auto_20150501_1515.py
+-rw-r--r--  2.0 unx      457 b- defN 23-Mar-15 11:27 explorer/migrations/0003_query_snapshot.py
+-rw-r--r--  2.0 unx      410 b- defN 23-Mar-15 11:27 explorer/migrations/0004_querylog_duration.py
+-rw-r--r--  2.0 unx     1229 b- defN 23-Mar-15 11:27 explorer/migrations/0005_querychangelog.py
+-rw-r--r--  2.0 unx      454 b- defN 23-Mar-15 11:27 explorer/migrations/0006_auto_20230207_0103.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Mar-15 11:27 explorer/migrations/__init__.py
+-rw-r--r--  2.0 unx     1390 b- defN 23-Mar-15 11:27 explorer/static/explorer/explorer.css
+-rw-r--r--  2.0 unx     7596 b- defN 23-Jul-05 13:06 explorer/static/explorer/explorer.js
+-rw-r--r--  2.0 unx     1560 b- defN 23-Mar-15 11:27 explorer/static/explorer/query-list.js
+-rw-r--r--  2.0 unx     3883 b- defN 23-Mar-15 11:27 explorer/templates/explorer/base.html
+-rw-r--r--  2.0 unx      510 b- defN 23-Mar-15 11:27 explorer/templates/explorer/params.html
+-rw-r--r--  2.0 unx     3879 b- defN 23-Jul-05 13:06 explorer/templates/explorer/play.html
+-rw-r--r--  2.0 unx     6855 b- defN 23-Mar-15 11:27 explorer/templates/explorer/preview_pane.html
+-rw-r--r--  2.0 unx     6739 b- defN 23-Jul-05 13:06 explorer/templates/explorer/query.html
+-rw-r--r--  2.0 unx      369 b- defN 23-Mar-15 11:27 explorer/templates/explorer/query_confirm_delete.html
+-rw-r--r--  2.0 unx     4526 b- defN 23-Jul-05 13:06 explorer/templates/explorer/query_list.html
+-rw-r--r--  2.0 unx     2018 b- defN 23-Jul-05 13:06 explorer/templates/explorer/querychangelog_list.html
+-rw-r--r--  2.0 unx     1969 b- defN 23-Jul-05 13:06 explorer/templates/explorer/querylog_list.html
+-rw-r--r--  2.0 unx     1819 b- defN 23-Mar-15 11:27 explorer/templates/explorer/schema.html
+-rw-r--r--  2.0 unx        0 b- defN 23-Mar-15 11:27 explorer/tests/__init__.py
+-rw-r--r--  2.0 unx      435 b- defN 23-Mar-15 11:27 explorer/tests/factories.py
+-rw-r--r--  2.0 unx     1439 b- defN 23-Mar-15 11:27 explorer/tests/settings.py
+-rw-r--r--  2.0 unx     2049 b- defN 23-Mar-15 11:27 explorer/tests/test_actions.py
+-rw-r--r--  2.0 unx     1110 b- defN 23-Mar-15 11:27 explorer/tests/test_forms.py
+-rw-r--r--  2.0 unx     6307 b- defN 23-Mar-15 11:27 explorer/tests/test_models.py
+-rw-r--r--  2.0 unx     1985 b- defN 23-Mar-15 11:27 explorer/tests/test_tasks.py
+-rw-r--r--  2.0 unx     7679 b- defN 23-Jul-05 13:06 explorer/tests/test_utils.py
+-rw-r--r--  2.0 unx    19387 b- defN 23-Mar-15 11:27 explorer/tests/test_views.py
+-rw-r--r--  2.0 unx      222 b- defN 23-Mar-15 11:27 explorer/tests/urls.py
+-rw-r--r--  2.0 unx      928 b- defN 23-Mar-15 11:27 explorer/tests/utils.py
+-rw-r--r--  2.0 unx      244 b- defN 23-Jul-07 05:04 django_sql_explorer_squad-0.9.9.dist-info/AUTHORS
+-rw-r--r--  2.0 unx     1090 b- defN 23-Jul-07 05:04 django_sql_explorer_squad-0.9.9.dist-info/LICENSE
+-rw-r--r--  2.0 unx    15989 b- defN 23-Jul-07 05:04 django_sql_explorer_squad-0.9.9.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-07 05:04 django_sql_explorer_squad-0.9.9.dist-info/WHEEL
+-rw-r--r--  2.0 unx        9 b- defN 23-Jul-07 05:04 django_sql_explorer_squad-0.9.9.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     4384 b- defN 23-Jul-07 05:04 django_sql_explorer_squad-0.9.9.dist-info/RECORD
+49 files, 161097 bytes uncompressed, 49167 bytes compressed:  69.5%
```

## zipnote {}

```diff
@@ -30,20 +30,14 @@
 
 Filename: explorer/views.py
 Comment: 
 
 Filename: explorer/__pycache__/__init__.cpython-39.pyc
 Comment: 
 
-Filename: explorer/__pycache__/models.cpython-39.pyc
-Comment: 
-
-Filename: explorer/__pycache__/utils.cpython-39.pyc
-Comment: 
-
 Filename: explorer/migrations/0001_initial.py
 Comment: 
 
 Filename: explorer/migrations/0002_auto_20150501_1515.py
 Comment: 
 
 Filename: explorer/migrations/0003_query_snapshot.py
@@ -129,32 +123,26 @@
 
 Filename: explorer/tests/urls.py
 Comment: 
 
 Filename: explorer/tests/utils.py
 Comment: 
 
-Filename: explorer/tests/__pycache__/__init__.cpython-39.pyc
-Comment: 
-
-Filename: explorer/tests/__pycache__/urls.cpython-39.pyc
-Comment: 
-
-Filename: django_sql_explorer_squad-0.9.8.dist-info/AUTHORS
+Filename: django_sql_explorer_squad-0.9.9.dist-info/AUTHORS
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.8.dist-info/LICENSE
+Filename: django_sql_explorer_squad-0.9.9.dist-info/LICENSE
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.8.dist-info/METADATA
+Filename: django_sql_explorer_squad-0.9.9.dist-info/METADATA
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.8.dist-info/WHEEL
+Filename: django_sql_explorer_squad-0.9.9.dist-info/WHEEL
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.8.dist-info/top_level.txt
+Filename: django_sql_explorer_squad-0.9.9.dist-info/top_level.txt
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.8.dist-info/RECORD
+Filename: django_sql_explorer_squad-0.9.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## explorer/__init__.py

```diff
@@ -1,11 +1,11 @@
 __version_info__ = {
     'major': 0,
     'minor': 9,
-    'micro': 2,
+    'micro': 9,
     'releaselevel': 'final',
     'serial': 0
 }
 
 
 def get_version(short=False):
     assert __version_info__['releaselevel'] in ('alpha', 'beta', 'final')
```

## explorer/app_settings.py

```diff
@@ -1,13 +1,15 @@
 from django.conf import settings
 
 # Required
 EXPLORER_CONNECTION_NAME = getattr(settings, 'EXPLORER_CONNECTION_NAME', None)
 EXPLORER_CONNECTION_PII_NAME = getattr(
     settings, 'EXPLORER_CONNECTION_PII_NAME', None)
+EXPLORER_CONNECTION_ASYNC_API_DB_NAME = getattr(
+    settings, 'EXPLORER_CONNECTION_ASYNC_API_DB_NAME', None)
 
 # Change the behavior of explorer
 EXPLORER_SQL_BLACKLIST = getattr(settings, 'EXPLORER_SQL_BLACKLIST', ('ALTER', 'RENAME ', 'DROP', 'TRUNCATE',
                                  'INSERT INTO', 'UPDATE', 'REPLACE', 'DELETE', 'CREATE TABLE', 'SCHEMA', 'GRANT', 'OWNER TO'))
 EXPLORER_SQL_WHITELIST = getattr(
     settings, 'EXPLORER_SQL_WHITELIST', ('CREATED', 'DELETED', 'REGEXP_REPLACE'))
 EXPLORER_DEFAULT_ROWS = getattr(settings, 'EXPLORER_DEFAULT_ROWS', 1000)
```

## explorer/models.py

```diff
@@ -1,8 +1,8 @@
-from explorer.utils import passes_blacklist, swap_params, extract_params, shared_dict_update, get_connection, get_s3_connection, get_connection_pii
+from explorer.utils import passes_blacklist, swap_params, extract_params, shared_dict_update, get_connection, get_s3_connection, get_connection_pii, get_connection_asyncapi_db, should_route_to_asyncapi_db, add_cutoff_date_to_requestlog_queries
 from future.utils import python_2_unicode_compatible
 from django.db import models, DatabaseError
 from time import time
 from django.core.urlresolvers import reverse
 from django.conf import settings
 from django.contrib import messages
 from django.contrib.messages import constants as messages_constants
@@ -214,26 +214,35 @@
         if transforms:
             for r in self.data:
                 for ix, t in transforms:
                     r[ix] = t.format(str(r[ix]))
 
     def execute_query(self):
         # can change connectiion type here to use different role --> get_connection_pii()
+        route_to_asyncapi_db = should_route_to_asyncapi_db(self.sql)
         if (self.is_connection_type_pii):
             logger.info(
                 "pii-connection")
             conn = get_connection_pii()
+        elif route_to_asyncapi_db:
+            logger.info("Route to Async API DB")
+            conn = get_connection_asyncapi_db()
         else:
             logger.info("non-pii-connection")
             conn = get_connection()
+
         cursor = conn.cursor()
         start_time = time()
 
         try:
-            cursor.execute(self.sql)
+            if route_to_asyncapi_db:
+                modified_sql = add_cutoff_date_to_requestlog_queries(self.sql)
+                cursor.execute(modified_sql)
+            else:
+                cursor.execute(self.sql)
         except DatabaseError as e:
             cursor.close()
             if (re.search("permission denied for table", str(e)) and self.title != "Playground"):
 
                 raise DatabaseError(
                     "Query saved but unable to execute it because "+str(e))
             else:
```

## explorer/utils.py

```diff
@@ -23,14 +23,15 @@
     import csv
 else:
     import unicodecsv as csv
 
 EXPLORER_PARAM_TOKEN = "$$"
 
 REPLICATION_LAG_THRESHOLD_VALUE_IN_MINUTES = 3
+REQUEST_LOG_SQL_CUTOFF_DATE = "2023-06-01"
 
 # SQL Specific Things
 
 
 def passes_blacklist(sql):
     clean = functools.reduce(lambda sql, term: sql.upper().replace(term, ""), [
                              t.upper() for t in app_settings.EXPLORER_SQL_WHITELIST], sql)
@@ -45,14 +46,19 @@
 
 
 def get_connection_pii():
     logger.info("explorer_pii_connection succesfull")
     return connections[app_settings.EXPLORER_CONNECTION_PII_NAME] if app_settings.EXPLORER_CONNECTION_PII_NAME else connection
 
 
+def get_connection_asyncapi_db():
+    logger.info("Connecting with async-api DB")
+    return connections[app_settings.EXPLORER_CONNECTION_ASYNC_API_DB_NAME] if app_settings.EXPLORER_CONNECTION_ASYNC_API_DB_NAME else connection
+
+
 def schema_info():
     """
     Construct schema information via introspection of the django models in the database.
 
     :return: Schema information of the following form, sorted by db_table_name.
         [
             ("package.name -> ModelClass", "db_table_name",
@@ -280,8 +286,93 @@
         minutes=REPLICATION_LAG_THRESHOLD_VALUE_IN_MINUTES)
 
     if not replication_lag or replication_lag <= threshold_value:
         return False, None
 
     return True, human(replication_lag, 4)
 
-    
+
+def should_route_to_asyncapi_db(sql):
+    request_log_tables = ["request_log_requestlog", "request_log_requestlogdata"]
+    pattern = r"\b(?:%s)\b" % "|".join(map(re.escape, request_log_tables))
+    match = re.search(pattern, sql)
+    if match:
+        return True
+
+    return False
+
+
+def check_and_update_sql_using_query_clause(sql, cutoff_date, query_clause):
+    # Split the SQL statement at the query_clause
+    parts = sql.split(query_clause)
+    select_clause = parts[0].strip()
+
+    # Check if clause is the last part of the SQL statement
+    if len(parts) > 1:
+        remaining_clause = query_clause + ' ' + parts[1].strip()
+    else:
+        remaining_clause = ''
+
+    # Add the "WHERE" clause with the cutoff date before the query_clause
+    modified_sql = '{} WHERE created_at >= \'{}\' {}'.format(select_clause, cutoff_date, remaining_clause)
+    return modified_sql
+
+
+def add_cutoff_date_to_sql_without_where_clause(sql, cutoff_date):
+    sql = sql.strip()
+    # Check if the SQL statement contains "GROUP BY", "ORDER BY", or "LIMIT" clauses
+    if 'GROUP BY' in sql:
+        return check_and_update_sql_using_query_clause(sql, cutoff_date, 'GROUP BY')
+    if 'ORDER BY' in sql:
+        return check_and_update_sql_using_query_clause(sql, cutoff_date, 'ORDER BY')
+    if 'LIMIT' in sql:
+        return check_and_update_sql_using_query_clause(sql, cutoff_date, 'LIMIT')
+
+    # Add the "WHERE" clause with the cutoff date
+    modified_sql = '{} WHERE created_at >= \'{}\''.format(sql, cutoff_date)
+    return modified_sql
+
+
+def add_cutoff_date_to_requestlog_queries(sql):
+    cutoff_date = datetime.datetime.strptime(REQUEST_LOG_SQL_CUTOFF_DATE, "%Y-%m-%d")
+
+    # Split the SQL statement into different parts
+    parts = fmt_sql(sql).split('WHERE')
+    modified_sql = ''
+
+    if len(parts) == 1:
+        # No WHERE clause, add cutoff date filter
+        modified_sql = add_cutoff_date_to_sql_without_where_clause(parts[0], cutoff_date)
+    else:
+        # SQL statement contains a WHERE clause
+        modified_sql = parts[0]
+        conditions = parts[1].strip().split(' ')
+
+        # Find the position of GROUP BY or ORDER BY clauses
+        group_by_index = -1
+        order_by_index = -1
+        limit_index = -1
+
+        for i, condition in enumerate(conditions):
+            if condition == 'GROUP' and conditions[i + 1] == 'BY':
+                group_by_index = i
+            elif condition == 'ORDER' and conditions[i + 1] == 'BY':
+                order_by_index = i
+            elif condition == 'LIMIT':
+                limit_index = i
+
+        # Determine the index before which the cutoff date filter should be added
+        filter_indices = list(filter(lambda x: x != -1, [group_by_index, order_by_index, limit_index]))
+        filter_index = min(filter_indices) if filter_indices else -1
+
+        if filter_index == -1:
+            # Add cutoff date filter after existing WHERE clause
+            modified_sql += " WHERE created_at >= '{}' AND {}".format(cutoff_date, parts[1])
+        else:
+            # Add cutoff date filter before GROUP BY, ORDER BY, or LIMIT clauses
+            modified_sql += " WHERE created_at >= '{}' {} {}".format(
+                cutoff_date,
+                'AND' if filter_index > 0 else '',
+                parts[1]
+            )
+
+    return fmt_sql(modified_sql)
```

## explorer/__pycache__/__init__.cpython-39.pyc

 * *Format-specific differences are supported for Python .pyc files but no file-specific differences were detected; falling back to a binary diff. file(1) reports: Byte-compiled Python module for CPython 3.9, timestamp-based, .py timestamp: Mon Apr  3 11:51:43 2023 UTC, .py size: 581 bytes*

 * *Could not decompile bytecode: bad marshal data (unknown type code)*

```diff
@@ -1,8 +1,8 @@
-00000000: 610d 0d0a 0000 0000 cfbd 2a64 4502 0000  a.........*dE...
+00000000: 610d 0d0a 0000 0000 99ab 1164 4502 0000  a..........dE...
 00000010: e300 0000 0000 0000 0000 0000 0000 0000  ................
 00000020: 0006 0000 0040 0000 0073 2400 0000 6400  .....@...s$...d.
 00000030: 6401 6402 6403 6400 6404 9c05 5a00 6409  d.d.d.d.d...Z.d.
 00000040: 6406 6407 8401 5a01 6501 8300 5a02 6408  d.d...Z.e...Z.d.
 00000050: 5300 290a e900 0000 00e9 0900 0000 e902  S.).............
 00000060: 0000 00da 0566 696e 616c 2905 da05 6d61  .....final)...ma
 00000070: 6a6f 72da 056d 696e 6f72 da05 6d69 6372  jor..minor..micr
@@ -19,21 +19,21 @@
 00000120: 4e72 0800 0000 2903 da05 616c 7068 61da  Nr....)...alpha.
 00000130: 0462 6574 6172 0400 0000 7a13 2528 6d61  .betar....z.%(ma
 00000140: 6a6f 7229 692e 2528 6d69 6e6f 7229 6972  jor)i.%(minor)ir
 00000150: 0700 0000 7a0a 2e25 286d 6963 726f 2969  ....z..%(micro)i
 00000160: 7204 0000 007a 0425 7325 6972 0100 0000  r....z.%s%ir....
 00000170: 7209 0000 00da 0029 03da 105f 5f76 6572  r......)...__ver
 00000180: 7369 6f6e 5f69 6e66 6f5f 5fda 0661 7070  sion_info__..app
-00000190: 656e 64da 046a 6f69 6e29 025a 0573 686f  end..join).Z.sho
-000001a0: 7274 5a04 7665 7273 a900 7210 0000 00fa  rtZ.vers..r.....
-000001b0: 422f 5573 6572 732f 6865 6d65 6e64 7261  B/Users/hemendra
-000001c0: 7368 6172 6d61 2f44 6576 2f64 6a61 6e67  sharma/Dev/djang
-000001d0: 6f2d 7371 6c2d 6578 706c 6f72 6572 2f65  o-sql-explorer/e
-000001e0: 7870 6c6f 7265 722f 5f5f 696e 6974 5f5f  xplorer/__init__
-000001f0: 2e70 79da 0b67 6574 5f76 6572 7369 6f6e  .py..get_version
-00000200: 0a00 0000 730e 0000 0000 0110 010a 0108  ....s...........
-00000210: 010e 0110 011e 0172 1200 0000 4e29 0146  .......r....N).F
-00000220: 2903 720d 0000 0072 1200 0000 da0b 5f5f  ).r....r......__
-00000230: 7665 7273 696f 6e5f 5f72 1000 0000 7210  version__r....r.
-00000240: 0000 0072 1000 0000 7211 0000 00da 083c  ...r....r......<
-00000250: 6d6f 6475 6c65 3e02 0000 0073 0e00 0000  module>....s....
-00000260: 0201 0201 0201 0201 02fb 0609 0a09       ..............
+00000190: 656e 64da 046a 6f69 6e29 02da 0573 686f  end..join)...sho
+000001a0: 7274 da04 7665 7273 a900 7212 0000 00fa  rt..vers..r.....
+000001b0: 3c2f 5573 6572 732f 756a 6a77 616c 2f53  </Users/ujjwal/S
+000001c0: 7175 6164 2f64 6a61 6e67 6f2d 7371 6c2d  quad/django-sql-
+000001d0: 6578 706c 6f72 6572 2f65 7870 6c6f 7265  explorer/explore
+000001e0: 722f 5f5f 696e 6974 5f5f 2e70 79da 0b67  r/__init__.py..g
+000001f0: 6574 5f76 6572 7369 6f6e 0a00 0000 730e  et_version....s.
+00000200: 0000 0000 0110 010a 0108 010e 0110 011e  ................
+00000210: 0172 1400 0000 4e29 0146 2903 720d 0000  .r....N).F).r...
+00000220: 0072 1400 0000 da0b 5f5f 7665 7273 696f  .r......__versio
+00000230: 6e5f 5f72 1200 0000 7212 0000 0072 1200  n__r....r....r..
+00000240: 0000 7213 0000 00da 083c 6d6f 6475 6c65  ..r......<module
+00000250: 3e02 0000 0073 0e00 0000 0201 0201 0201  >....s..........
+00000260: 0201 02fb 0609 0a09                      ........
```

## explorer/tests/test_utils.py

```diff
@@ -1,15 +1,15 @@
 #encoding=utf8
 
 from django.test import TestCase
 from explorer.actions import generate_report_action
 from explorer.tests.factories import SimpleQueryFactory
 from explorer import app_settings
 from explorer.utils import passes_blacklist, schema_info, param, swap_params, extract_params,\
-    shared_dict_update, EXPLORER_PARAM_TOKEN, write_csv, get_params_from_request
+    shared_dict_update, EXPLORER_PARAM_TOKEN, write_csv, get_params_from_request, fmt_sql, add_cutoff_date_to_requestlog_queries
 from mock import Mock
 
 
 class TestSqlBlacklist(TestCase):
 
     def setUp(self):
         self.orig = app_settings.EXPLORER_SQL_BLACKLIST
@@ -124,8 +124,52 @@
 
 class TestCsv(TestCase):
 
     def test_writing_unicode(self):
         headers = ['a', None]
         data = [[1, None], [u"Jenét", '1']]
         res = write_csv(headers, data).getvalue()
-        self.assertEqual(res, 'a,\r\n1,\r\nJenét,1\r\n')
+        self.assertEqual(res, 'a,\r\n1,\r\nJenét,1\r\n')
+
+
+class TestAddCutoffDateToRequestLogQueries(TestCase):
+    def test_no_where_clause(self):
+        sql = "SELECT * FROM request_log_requestlogdata"
+        modified_sql = add_cutoff_date_to_requestlog_queries(sql)
+        expected_sql = "SELECT * FROM request_log_requestlogdata WHERE created_at >= '2023-06-01 00:00:00'"
+        self.assertEqual(modified_sql, fmt_sql(expected_sql))
+
+    def test_no_where_clause_but_contains_group_by_clause(self):
+        sql = "SELECT * FROM request_log_requestlogdata group by status"
+        modified_sql = add_cutoff_date_to_requestlog_queries(sql)
+        expected_sql = "SELECT * FROM request_log_requestlogdata WHERE created_at >= '2023-06-01 00:00:00' group by status"
+        self.assertEqual(modified_sql, fmt_sql(expected_sql))
+
+    def test_no_where_clause_but_contains_order_by_clause(self):
+        sql = "SELECT * FROM request_log_requestlogdata order by created_at"
+        modified_sql = add_cutoff_date_to_requestlog_queries(sql)
+        expected_sql = "SELECT * FROM request_log_requestlogdata WHERE created_at >= '2023-06-01 00:00:00' order by created_at"
+        self.assertEqual(modified_sql, fmt_sql(expected_sql))
+
+    def test_with_where_clause(self):
+        sql = "SELECT * FROM request_log_requestlogdata WHERE status = 'success'"
+        modified_sql = add_cutoff_date_to_requestlog_queries(sql)
+        expected_sql = "SELECT * FROM request_log_requestlogdata WHERE created_at >= '2023-06-01 00:00:00' AND status = 'success'"
+        self.assertEqual(modified_sql, fmt_sql(expected_sql))
+
+    def test_with_group_by_clause(self):
+        sql = "SELECT * FROM request_log_requestlogdata WHERE status = 'success' GROUP BY user_id"
+        modified_sql = add_cutoff_date_to_requestlog_queries(sql)
+        expected_sql = "SELECT * FROM request_log_requestlogdata WHERE created_at >= '2023-06-01 00:00:00' AND status = 'success' GROUP BY user_id"
+        self.assertEqual(modified_sql, fmt_sql(expected_sql))
+
+    def test_with_order_by_clause(self):
+        sql = "SELECT * FROM request_log_requestlogdata WHERE status = 'success' ORDER BY created_at DESC"
+        modified_sql = add_cutoff_date_to_requestlog_queries(sql)
+        expected_sql = "SELECT * FROM request_log_requestlogdata WHERE created_at >= '2023-06-01 00:00:00' AND status = 'success' ORDER BY created_at DESC"
+        self.assertEqual(modified_sql, fmt_sql(expected_sql))
+
+    def test_with_limit_clause(self):
+        sql = "SELECT * FROM request_log_requestlogdata WHERE status = 'success' LIMIT 10"
+        modified_sql = add_cutoff_date_to_requestlog_queries(sql)
+        expected_sql = "SELECT * FROM request_log_requestlogdata WHERE created_at >= '2023-06-01 00:00:00' AND status = 'success' LIMIT 10"
+        self.assertEqual(modified_sql, fmt_sql(expected_sql))
```

## Comparing `django_sql_explorer_squad-0.9.8.dist-info/LICENSE` & `django_sql_explorer_squad-0.9.9.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `django_sql_explorer_squad-0.9.8.dist-info/METADATA` & `django_sql_explorer_squad-0.9.9.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 Metadata-Version: 2.1
 Name: django-sql-explorer-squad
-Version: 0.9.8
+Version: 0.9.9
 Summary: A pluggable app that allows users (admins) to execute SQL, view, and export the results. Inspired by Stack Exchange Data Explorer.
 Home-page: https://github.com/epantry/django-sql-explorer
-Author: SQUADRUN
+Author: Chris Clark
 Author-email: chris@untrod.com
 License: MIT
 Keywords: django sql explorer reports reporting csv database query
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Intended Audience :: Developers
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Topic :: Utilities
```

## Comparing `django_sql_explorer_squad-0.9.8.dist-info/RECORD` & `django_sql_explorer_squad-0.9.9.dist-info/RECORD`

 * *Files 24% similar despite different names*

```diff
@@ -1,21 +1,19 @@
-explorer/__init__.py,sha256=wDYAiDMNYAoq4TtWnpdHeZbrDz7B5c9PvtY6ctPnx_Y,581
+explorer/__init__.py,sha256=DCJw4X72xFrOC6C_XI6Wh5CC5OEqtBuYhuHQ9pJJwAg,581
 explorer/actions.py,sha256=9HXZJasw4KInj2sJjFA1V2kr-x6TBQv8-LCgfz6AjbY,1632
 explorer/admin.py,sha256=kxspF9IE1I-klJjonhNU8rIkR1N9qCU8faItUSUvyys,375
-explorer/app_settings.py,sha256=JfFrwcggrrJnOu6Dn6GvfzIr4Tn4_3kHNI6eeFCqh2c,2180
+explorer/app_settings.py,sha256=xFVJjSXJsB8IEpDvtW3D51hENwXlhKrla0zSrhFr8lY,2290
 explorer/counter.py,sha256=VHqsayUogidDwQ79PcRLox-vk8JfL8obQBlKeX3Bp-w,2054
 explorer/forms.py,sha256=vfmoyUxfueFTfk-4qP_aRiVUdCTY9sVka0tcY8x48BQ,2039
-explorer/models.py,sha256=gWn7fLwoVsOWiCZgta-tuzQs8sUxfgt2pXlz6bgQYTU,9204
+explorer/models.py,sha256=f5KqCjzTBK8xYQ_mUMGDn6QRZFjZ1tBy9zL9yhvzPMI,9685
 explorer/tasks.py,sha256=E9oASEaa1ujsCr7YDfCr6xfFWxftjtKO73EiColPeBk,2233
 explorer/urls.py,sha256=uOcxG1clyuW7uGeqV1RFWmmkWG2gNXvb8-o_WjrgnAI,1265
-explorer/utils.py,sha256=dhhb4IEoTd5VPTpBc2u_lKcUClo8agLgtzRzM1fsZAw,8155
+explorer/utils.py,sha256=mJJwTULSeMg56Gdwg7ge66lhJBBhnPqGis_34iHj97c,11746
 explorer/views.py,sha256=UZt0-VM770BfoT2usxYTGbFz5Pk6v_gt7JZRWQhtD8U,15149
-explorer/__pycache__/__init__.cpython-39.pyc,sha256=0ynhNHdsfftjdQCbQ2XAXl973DZVVz8b2QbKU5iK_kw,622
-explorer/__pycache__/models.cpython-39.pyc,sha256=HVylAkpa-FDJXIMqwXJ-rtjRUku2yDABswG3e9Mswsc,12809
-explorer/__pycache__/utils.cpython-39.pyc,sha256=JIR2nr9zX4yV9VqM1JoDRqlSLLFBEXhj_4QyEvSN4YA,9715
+explorer/__pycache__/__init__.cpython-39.pyc,sha256=Xn6ke6NEH16y4lz4O3-CNfsfgQvkGE-fEUm6PP9egS8,616
 explorer/migrations/0001_initial.py,sha256=8ZTRFFkznebXTNIN4M3IHWHUwpMW0WS6tLHEfhUWfkw,1909
 explorer/migrations/0002_auto_20150501_1515.py,sha256=naK6Nz9pCzS1jbfbzUzs6lT68-KUW0cFFOLGZz4vGsg,511
 explorer/migrations/0003_query_snapshot.py,sha256=2NULV1bSd2LNXXbfvBsrcu7SrnxFBK18WwUTS_mZflg,457
 explorer/migrations/0004_querylog_duration.py,sha256=AF8XoLIwIHiwrCXWdr4IEfV3w4xEY7yHqNvrjlhAMoY,410
 explorer/migrations/0005_querychangelog.py,sha256=lA4N_CtL-qDdOXdj00GROrYKbHe7QTjRxoYvEKJZVmQ,1229
 explorer/migrations/0006_auto_20230207_0103.py,sha256=Gcq8WeCmT9dqLp7LbwWBOZwH2tq5d8bStTTU-gm5Vkg,454
 explorer/migrations/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
@@ -35,19 +33,17 @@
 explorer/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 explorer/tests/factories.py,sha256=ZAR-_nQn8k8XyjEA1rW8gfxvY8BPU0RPFSS3oZFi8Uk,435
 explorer/tests/settings.py,sha256=j85i-0Q0nlbCBBl46xsPR_dnUIZYzwULwZ3y-vOaueo,1439
 explorer/tests/test_actions.py,sha256=9vMFTZoUM_iNrHc5RjyS5vuicfXvQoaf98Hv4-gNv3w,2049
 explorer/tests/test_forms.py,sha256=Adjc614sfj5FGEwNpshwoYKiPd1XqvDeNUX7wkzlTd8,1110
 explorer/tests/test_models.py,sha256=gWEhyVl7IBVxxdEU7ZqMbeaZVpfg3piUBavIY5sxaAI,6307
 explorer/tests/test_tasks.py,sha256=tBNxL4niU1rZb26P9YBVDfF4OKTo8eiF8LYQK8onxzM,1985
-explorer/tests/test_utils.py,sha256=wzeTMJldshSggG3-IlK7GtW0smt1CDJT1wv-iuhYYvk,4827
+explorer/tests/test_utils.py,sha256=odYTbfYqh9qNfRY8QMWemFe8T0cKFNrURrcWD4r6tVo,7679
 explorer/tests/test_views.py,sha256=J_gapZu2A4AEJzjuuQfT_ey0zRe0vE_MNmIkFcYwo14,19387
 explorer/tests/urls.py,sha256=0rzxCRImd1IivOGwpOtNPI5Tnt-jiKp8hTTzxx4Qf34,222
 explorer/tests/utils.py,sha256=1q4L4sHfxjXEv9LpTQWrJbV6TN_4FtExQDJt80Tdi0g,928
-explorer/tests/__pycache__/__init__.cpython-39.pyc,sha256=BRb--rUtHIHMEWmBgg4x-P3d412oiiO54xY2SQb4qOw,163
-explorer/tests/__pycache__/urls.cpython-39.pyc,sha256=Ii16ejyK-HC1mlYbruChkSVvgZVxL98RQXyVrC8y5XM,414
-django_sql_explorer_squad-0.9.8.dist-info/AUTHORS,sha256=-yOIuXJ7TC0-m-gAy0Gjc3ez1eK0a-o7u9B7WCgqB6Y,244
-django_sql_explorer_squad-0.9.8.dist-info/LICENSE,sha256=hyOjdzZR7ljYNZbISAWLjgNRz6_b3-5EQfz2hOsvg3g,1090
-django_sql_explorer_squad-0.9.8.dist-info/METADATA,sha256=-Oj2noJ51RaGLbD4j4gXrTmf85O3bXjkChdgbQQpLjQ,15986
-django_sql_explorer_squad-0.9.8.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-django_sql_explorer_squad-0.9.8.dist-info/top_level.txt,sha256=HS5-rAbNJAJEVP0OygxhpNOCiXv092OahmzE5wX-k4s,9
-django_sql_explorer_squad-0.9.8.dist-info/RECORD,,
+django_sql_explorer_squad-0.9.9.dist-info/AUTHORS,sha256=-yOIuXJ7TC0-m-gAy0Gjc3ez1eK0a-o7u9B7WCgqB6Y,244
+django_sql_explorer_squad-0.9.9.dist-info/LICENSE,sha256=hyOjdzZR7ljYNZbISAWLjgNRz6_b3-5EQfz2hOsvg3g,1090
+django_sql_explorer_squad-0.9.9.dist-info/METADATA,sha256=HvzaIjrh5Am_bfbak9wY1snZMZUfVPJIXZce9jqU8jg,15989
+django_sql_explorer_squad-0.9.9.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+django_sql_explorer_squad-0.9.9.dist-info/top_level.txt,sha256=HS5-rAbNJAJEVP0OygxhpNOCiXv092OahmzE5wX-k4s,9
+django_sql_explorer_squad-0.9.9.dist-info/RECORD,,
```

