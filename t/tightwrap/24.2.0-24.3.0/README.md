# Comparing `tmp/tightwrap-24.2.0.tar.gz` & `tmp/tightwrap-24.3.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, last modified: Sat May  4 12:43:10 2024, max compression
+gzip compressed data, last modified: Thu May 23 22:04:48 2024, max compression
```

## Comparing `tightwrap-24.2.0.tar` & `tightwrap-24.3.0.tar`

### file list

```diff
@@ -1,16 +1,16 @@
--rw-r--r--   0        0        0      182 2024-05-04 12:43:10.000000 tightwrap-24.2.0/Justfile
--rw-r--r--   0        0        0    37967 2024-05-04 12:43:10.000000 tightwrap-24.2.0/pdm.lock
--rw-r--r--   0        0        0      792 2024-05-04 12:43:10.000000 tightwrap-24.2.0/tox.ini
--rw-r--r--   0        0        0     3253 2024-05-04 12:43:10.000000 tightwrap-24.2.0/.github/workflows/main.yml
--rw-r--r--   0        0        0     1577 2024-05-04 12:43:10.000000 tightwrap-24.2.0/.github/workflows/pypi-package.yml
--rw-r--r--   0        0        0     1577 2024-05-04 12:43:10.000000 tightwrap-24.2.0/src/tightwrap/__init__.py
--rw-r--r--   0        0        0     2654 2024-05-04 12:43:10.000000 tightwrap-24.2.0/src/tightwrap/_backported.py
--rw-r--r--   0        0        0        0 2024-05-04 12:43:10.000000 tightwrap-24.2.0/src/tightwrap/py.typed
--rw-r--r--   0        0        0        0 2024-05-04 12:43:10.000000 tightwrap-24.2.0/tests/__init__.py
--rw-r--r--   0        0        0      321 2024-05-04 12:43:10.000000 tightwrap-24.2.0/tests/test_typing.yml
--rw-r--r--   0        0        0     1093 2024-05-04 12:43:10.000000 tightwrap-24.2.0/tests/test_wraps.py
--rw-r--r--   0        0        0     3104 2024-05-04 12:43:10.000000 tightwrap-24.2.0/.gitignore
--rw-r--r--   0        0        0     9160 2024-05-04 12:43:10.000000 tightwrap-24.2.0/LICENSE
--rw-r--r--   0        0        0     2615 2024-05-04 12:43:10.000000 tightwrap-24.2.0/README.md
--rw-r--r--   0        0        0     1232 2024-05-04 12:43:10.000000 tightwrap-24.2.0/pyproject.toml
--rw-r--r--   0        0        0     3392 2024-05-04 12:43:10.000000 tightwrap-24.2.0/PKG-INFO
+-rw-r--r--   0        0        0      182 2024-05-23 22:04:48.000000 tightwrap-24.3.0/Justfile
+-rw-r--r--   0        0        0    37916 2024-05-23 22:04:48.000000 tightwrap-24.3.0/pdm.lock
+-rw-r--r--   0        0        0      792 2024-05-23 22:04:48.000000 tightwrap-24.3.0/tox.ini
+-rw-r--r--   0        0        0     3253 2024-05-23 22:04:48.000000 tightwrap-24.3.0/.github/workflows/main.yml
+-rw-r--r--   0        0        0     1577 2024-05-23 22:04:48.000000 tightwrap-24.3.0/.github/workflows/pypi-package.yml
+-rw-r--r--   0        0        0     1617 2024-05-23 22:04:48.000000 tightwrap-24.3.0/src/tightwrap/__init__.py
+-rw-r--r--   0        0        0     2654 2024-05-23 22:04:48.000000 tightwrap-24.3.0/src/tightwrap/_backported.py
+-rw-r--r--   0        0        0        0 2024-05-23 22:04:48.000000 tightwrap-24.3.0/src/tightwrap/py.typed
+-rw-r--r--   0        0        0        0 2024-05-23 22:04:48.000000 tightwrap-24.3.0/tests/__init__.py
+-rw-r--r--   0        0        0      321 2024-05-23 22:04:48.000000 tightwrap-24.3.0/tests/test_typing.yml
+-rw-r--r--   0        0        0     1344 2024-05-23 22:04:48.000000 tightwrap-24.3.0/tests/test_wraps.py
+-rw-r--r--   0        0        0     3104 2024-05-23 22:04:48.000000 tightwrap-24.3.0/.gitignore
+-rw-r--r--   0        0        0     9160 2024-05-23 22:04:48.000000 tightwrap-24.3.0/LICENSE
+-rw-r--r--   0        0        0     2836 2024-05-23 22:04:48.000000 tightwrap-24.3.0/README.md
+-rw-r--r--   0        0        0     1232 2024-05-23 22:04:48.000000 tightwrap-24.3.0/pyproject.toml
+-rw-r--r--   0        0        0     3613 2024-05-23 22:04:48.000000 tightwrap-24.3.0/PKG-INFO
```

### Comparing `tightwrap-24.2.0/pdm.lock` & `tightwrap-24.3.0/pdm.lock`

 * *Files 3% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 # This file is @generated by PDM.
 # It is not intended for manual editing.
 
 [metadata]
 groups = ["default", "lint", "test"]
 strategy = ["cross_platform", "inherit_metadata"]
 lock_version = "4.4.1"
-content_hash = "sha256:94a58901fa44cd260b4b83b0975adbf24b62965dc05874d3d919cf6a72c15af7"
+content_hash = "sha256:82586375ba55e00dd5ed367cd266ec59b07c6f3bb8472ce635bbc1fe0b6c6790"
 
 [[package]]
 name = "colorama"
 version = "0.4.6"
 requires_python = "!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*,!=3.4.*,!=3.5.*,!=3.6.*,>=2.7"
 summary = "Cross-platform colored terminal text."
 groups = ["test"]
@@ -368,36 +368,36 @@
     {file = "regex-2023.12.25-cp312-cp312-win32.whl", hash = "sha256:e2610e9406d3b0073636a3a2e80db05a02f0c3169b5632022b4e81c0364bcda5"},
     {file = "regex-2023.12.25-cp312-cp312-win_amd64.whl", hash = "sha256:cc37b9aeebab425f11f27e5e9e6cf580be7206c6582a64467a14dda211abc232"},
     {file = "regex-2023.12.25.tar.gz", hash = "sha256:29171aa128da69afdf4bde412d5bedc335f2ca8fcfe4489038577d05f16181e5"},
 ]
 
 [[package]]
 name = "ruff"
-version = "0.1.11"
+version = "0.4.4"
 requires_python = ">=3.7"
 summary = "An extremely fast Python linter and code formatter, written in Rust."
 groups = ["lint"]
 files = [
-    {file = "ruff-0.1.11-py3-none-macosx_10_12_x86_64.macosx_11_0_arm64.macosx_10_12_universal2.whl", hash = "sha256:a7f772696b4cdc0a3b2e527fc3c7ccc41cdcb98f5c80fdd4f2b8c50eb1458196"},
-    {file = "ruff-0.1.11-py3-none-macosx_10_12_x86_64.whl", hash = "sha256:934832f6ed9b34a7d5feea58972635c2039c7a3b434fe5ba2ce015064cb6e955"},
-    {file = "ruff-0.1.11-py3-none-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:ea0d3e950e394c4b332bcdd112aa566010a9f9c95814844a7468325290aabfd9"},
-    {file = "ruff-0.1.11-py3-none-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:9bd4025b9c5b429a48280785a2b71d479798a69f5c2919e7d274c5f4b32c3607"},
-    {file = "ruff-0.1.11-py3-none-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:e1ad00662305dcb1e987f5ec214d31f7d6a062cae3e74c1cbccef15afd96611d"},
-    {file = "ruff-0.1.11-py3-none-manylinux_2_17_ppc64.manylinux2014_ppc64.whl", hash = "sha256:4b077ce83f47dd6bea1991af08b140e8b8339f0ba8cb9b7a484c30ebab18a23f"},
-    {file = "ruff-0.1.11-py3-none-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:c4a88efecec23c37b11076fe676e15c6cdb1271a38f2b415e381e87fe4517f18"},
-    {file = "ruff-0.1.11-py3-none-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:5b25093dad3b055667730a9b491129c42d45e11cdb7043b702e97125bcec48a1"},
-    {file = "ruff-0.1.11-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:231d8fb11b2cc7c0366a326a66dafc6ad449d7fcdbc268497ee47e1334f66f77"},
-    {file = "ruff-0.1.11-py3-none-musllinux_1_2_aarch64.whl", hash = "sha256:09c415716884950080921dd6237767e52e227e397e2008e2bed410117679975b"},
-    {file = "ruff-0.1.11-py3-none-musllinux_1_2_armv7l.whl", hash = "sha256:0f58948c6d212a6b8d41cd59e349751018797ce1727f961c2fa755ad6208ba45"},
-    {file = "ruff-0.1.11-py3-none-musllinux_1_2_i686.whl", hash = "sha256:190a566c8f766c37074d99640cd9ca3da11d8deae2deae7c9505e68a4a30f740"},
-    {file = "ruff-0.1.11-py3-none-musllinux_1_2_x86_64.whl", hash = "sha256:6464289bd67b2344d2a5d9158d5eb81025258f169e69a46b741b396ffb0cda95"},
-    {file = "ruff-0.1.11-py3-none-win32.whl", hash = "sha256:9b8f397902f92bc2e70fb6bebfa2139008dc72ae5177e66c383fa5426cb0bf2c"},
-    {file = "ruff-0.1.11-py3-none-win_amd64.whl", hash = "sha256:eb85ee287b11f901037a6683b2374bb0ec82928c5cbc984f575d0437979c521a"},
-    {file = "ruff-0.1.11-py3-none-win_arm64.whl", hash = "sha256:97ce4d752f964ba559c7023a86e5f8e97f026d511e48013987623915431c7ea9"},
-    {file = "ruff-0.1.11.tar.gz", hash = "sha256:f9d4d88cb6eeb4dfe20f9f0519bd2eaba8119bde87c3d5065c541dbae2b5a2cb"},
+    {file = "ruff-0.4.4-py3-none-macosx_10_12_x86_64.whl", hash = "sha256:29d44ef5bb6a08e235c8249294fa8d431adc1426bfda99ed493119e6f9ea1bf6"},
+    {file = "ruff-0.4.4-py3-none-macosx_11_0_arm64.whl", hash = "sha256:c4efe62b5bbb24178c950732ddd40712b878a9b96b1d02b0ff0b08a090cbd891"},
+    {file = "ruff-0.4.4-py3-none-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:4c8e2f1e8fc12d07ab521a9005d68a969e167b589cbcaee354cb61e9d9de9c15"},
+    {file = "ruff-0.4.4-py3-none-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:60ed88b636a463214905c002fa3eaab19795679ed55529f91e488db3fe8976ab"},
+    {file = "ruff-0.4.4-py3-none-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:b90fc5e170fc71c712cc4d9ab0e24ea505c6a9e4ebf346787a67e691dfb72e85"},
+    {file = "ruff-0.4.4-py3-none-manylinux_2_17_ppc64.manylinux2014_ppc64.whl", hash = "sha256:8e7e6ebc10ef16dcdc77fd5557ee60647512b400e4a60bdc4849468f076f6eef"},
+    {file = "ruff-0.4.4-py3-none-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:b9ddb2c494fb79fc208cd15ffe08f32b7682519e067413dbaf5f4b01a6087bcd"},
+    {file = "ruff-0.4.4-py3-none-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:c51c928a14f9f0a871082603e25a1588059b7e08a920f2f9fa7157b5bf08cfe9"},
+    {file = "ruff-0.4.4-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:b5eb0a4bfd6400b7d07c09a7725e1a98c3b838be557fee229ac0f84d9aa49c36"},
+    {file = "ruff-0.4.4-py3-none-musllinux_1_2_aarch64.whl", hash = "sha256:b1867ee9bf3acc21778dcb293db504692eda5f7a11a6e6cc40890182a9f9e595"},
+    {file = "ruff-0.4.4-py3-none-musllinux_1_2_armv7l.whl", hash = "sha256:1aecced1269481ef2894cc495647392a34b0bf3e28ff53ed95a385b13aa45768"},
+    {file = "ruff-0.4.4-py3-none-musllinux_1_2_i686.whl", hash = "sha256:9da73eb616b3241a307b837f32756dc20a0b07e2bcb694fec73699c93d04a69e"},
+    {file = "ruff-0.4.4-py3-none-musllinux_1_2_x86_64.whl", hash = "sha256:958b4ea5589706a81065e2a776237de2ecc3e763342e5cc8e02a4a4d8a5e6f95"},
+    {file = "ruff-0.4.4-py3-none-win32.whl", hash = "sha256:cb53473849f011bca6e754f2cdf47cafc9c4f4ff4570003a0dad0b9b6890e876"},
+    {file = "ruff-0.4.4-py3-none-win_amd64.whl", hash = "sha256:424e5b72597482543b684c11def82669cc6b395aa8cc69acc1858b5ef3e5daae"},
+    {file = "ruff-0.4.4-py3-none-win_arm64.whl", hash = "sha256:39df0537b47d3b597293edbb95baf54ff5b49589eb7ff41926d8243caa995ea6"},
+    {file = "ruff-0.4.4.tar.gz", hash = "sha256:f87ea42d5cdebdc6a69761a9d0bc83ae9b3b30d0ad78952005ba6568d6c022af"},
 ]
 
 [[package]]
 name = "tomli"
 version = "2.0.1"
 requires_python = ">=3.7"
 summary = "A lil' TOML parser"
@@ -420,12 +420,12 @@
 ]
 
 [[package]]
 name = "typing-extensions"
 version = "4.9.0"
 requires_python = ">=3.8"
 summary = "Backported and Experimental Type Hints for Python 3.8+"
-groups = ["lint", "test"]
+groups = ["default", "lint", "test"]
 files = [
     {file = "typing_extensions-4.9.0-py3-none-any.whl", hash = "sha256:af72aea155e91adfc61c3ae9e0e342dbc0cba726d6cba4b6c72c1f34e47291cd"},
     {file = "typing_extensions-4.9.0.tar.gz", hash = "sha256:23478f88c37f27d76ac8aee6c905017a143b0b1b886c3c9f66bc2fd94f9f5783"},
 ]
```

### Comparing `tightwrap-24.2.0/tox.ini` & `tightwrap-24.3.0/tox.ini`

 * *Files identical despite different names*

### Comparing `tightwrap-24.2.0/.github/workflows/main.yml` & `tightwrap-24.3.0/.github/workflows/main.yml`

 * *Files identical despite different names*

### Comparing `tightwrap-24.2.0/.github/workflows/pypi-package.yml` & `tightwrap-24.3.0/.github/workflows/pypi-package.yml`

 * *Files identical despite different names*

### Comparing `tightwrap-24.2.0/src/tightwrap/__init__.py` & `tightwrap-24.3.0/src/tightwrap/__init__.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 import sys
 from functools import wraps as functools_wraps
-from inspect import Signature
+from inspect import Signature, _empty
 from typing import Any, Callable, TypeVar, cast
 
 from ._backported import eval_if_necessary, get_annotations
 
 if sys.version_info >= (3, 10):
     from typing import ParamSpec
 else:
@@ -16,20 +16,20 @@
 
 
 def _get_resolved_signature(fn: Callable[..., Any]) -> Signature:
     signature = Signature.from_callable(fn)
     evaluated_annotations, fn_globals, fn_locals = get_annotations(fn)
 
     for name, parameter in signature.parameters.items():
-        setattr(parameter, "_annotation", evaluated_annotations[name])
+        parameter._annotation = evaluated_annotations.get(name, _empty)  # type: ignore
 
     new_return_annotation = eval_if_necessary(
         signature.return_annotation, fn_globals, fn_locals
     )
-    setattr(signature, "_return_annotation", new_return_annotation)
+    signature._return_annotation = new_return_annotation  # type: ignore
 
     return signature
 
 
 def wraps(wrapped: Callable[P, Any]) -> Callable[[Callable[..., R]], Callable[P, R]]:
     """Apply `functools.wraps`"""
 
@@ -38,13 +38,13 @@
         res = functools_wraps(wrapped)(fn)
 
         orig_sig = _get_resolved_signature(wrapped)
 
         if orig_sig.return_annotation != wrapper_return:
             # We do a little rewriting.
             new_sig = Signature(None, return_annotation=wrapper_return)
-            setattr(new_sig, "_parameters", orig_sig.parameters)
-            setattr(res, "__signature__", new_sig)
+            new_sig._parameters = orig_sig.parameters  # type: ignore
+            res.__signature__ = new_sig  # type: ignore
 
         return cast(Callable[P, R], res)
 
     return wrapper
```

### Comparing `tightwrap-24.2.0/src/tightwrap/_backported.py` & `tightwrap-24.3.0/src/tightwrap/_backported.py`

 * *Files identical despite different names*

### Comparing `tightwrap-24.2.0/tests/test_wraps.py` & `tightwrap-24.3.0/tests/test_wraps.py`

 * *Files 22% similar despite different names*

```diff
@@ -1,13 +1,15 @@
 from __future__ import annotations
 
 from typing import Any, Callable
 
-from tightwrap import _get_resolved_signature  # pyright: ignore[reportPrivateUsage]
-from tightwrap import wraps
+from tightwrap import (
+    _get_resolved_signature,  # pyright: ignore[reportPrivateUsage]
+    wraps,
+)
 
 
 def test_wraps() -> None:
     """Wraps works."""
 
     def wrapped(a: int) -> int:
         return a + 1
@@ -35,7 +37,20 @@
 
     assert wrapper(3) == "4"
     assert wrapped_signature.parameters == wrapper_signature.parameters
     assert wrapper_signature.return_annotation is str
     assert wrapped_signature.return_annotation is int
 
     _: Callable[[int], str] = wrapper
+
+
+def test_wrap_unannotated() -> None:
+    """Unannotated functions can be wrapped."""
+
+    def inner(a):
+        return a + 1
+
+    @wraps(inner)
+    def outer(*args: Any, **kwargs: Any) -> int:
+        return inner(*args, **kwargs)
+
+    assert outer(3) == 4
```

### Comparing `tightwrap-24.2.0/.gitignore` & `tightwrap-24.3.0/.gitignore`

 * *Files identical despite different names*

### Comparing `tightwrap-24.2.0/LICENSE` & `tightwrap-24.3.0/LICENSE`

 * *Files identical despite different names*

### Comparing `tightwrap-24.2.0/README.md` & `tightwrap-24.3.0/README.md`

 * *Files 16% similar despite different names*

```diff
@@ -47,14 +47,20 @@
 reveal_type(wrapping)  # Revealed type is "def (*args: Any, **kwargs: Any) -> builtins.int"
 
 wrapping("a string")  # No type error, blows up at runtime.
 ```
 
 ## Changelog
 
+### 24.3.0 (2024-05-24)
+
+- Fix wrapping unannotated functions.
+  ([#2](https://github.com/Tinche/tightwrap/issues/2) [#3](https://github.com/Tinche/tightwrap/pull/3))
+
 ### 24.2.0 (2024-05-04)
 
 - Add support for Python 3.8 and 3.9.
+  ([#1](https://github.com/Tinche/tightwrap/pull/1))
 
 ### 24.1.0 (2024-01-09)
 
 - Initial version.
```

### Comparing `tightwrap-24.2.0/pyproject.toml` & `tightwrap-24.3.0/pyproject.toml`

 * *Files identical despite different names*

### Comparing `tightwrap-24.2.0/PKG-INFO` & `tightwrap-24.3.0/PKG-INFO`

 * *Files 8% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.3
 Name: tightwrap
-Version: 24.2.0
+Version: 24.3.0
 Summary: A typed `functools.wraps`.
 Author-email: Tin TvrtkoviÄ‡ <tinchester@gmail.com>
 License: Apache2
 License-File: LICENSE
 Classifier: Intended Audience :: Developers
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
@@ -67,14 +67,20 @@
 reveal_type(wrapping)  # Revealed type is "def (*args: Any, **kwargs: Any) -> builtins.int"
 
 wrapping("a string")  # No type error, blows up at runtime.
 ```
 
 ## Changelog
 
+### 24.3.0 (2024-05-24)
+
+- Fix wrapping unannotated functions.
+  ([#2](https://github.com/Tinche/tightwrap/issues/2) [#3](https://github.com/Tinche/tightwrap/pull/3))
+
 ### 24.2.0 (2024-05-04)
 
 - Add support for Python 3.8 and 3.9.
+  ([#1](https://github.com/Tinche/tightwrap/pull/1))
 
 ### 24.1.0 (2024-01-09)
 
 - Initial version.
```

